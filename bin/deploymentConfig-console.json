{
   "annotations":{
      "description":"The fabric8 console"
   },
   "apiVersion":"v1beta1",
   "kind":"List",
   "items":[
      {
         "apiVersion":"v1beta1",
         "kind":"BuildConfig",
         "metadata":{
            "labels":{
               "component":"fabric8Console"
            },
            "name":"console-build"
         },
         "parameters":{
            "output":{
               "to":{
                  "name":"console"
               }
            },
            "source":{
               "git":{
                  "uri":"https://github.com/hawtio/hawtio-kubernetes.git"
               },
               "type":"Git"
            },
            "strategy":{
               "dockerStrategy":{
                  "baseImage":"jimmidyson/k8s-proxy"
               },
               "type":"Docker"
            }
         },
         "triggers":[
            {
               "github":{
                  "secret":"secret101"
               },
               "type":"github"
            },
            {
               "generic":{
                  "secret":"secret101"
               },
               "type":"generic"
            },
            {
               "type":"imageChange",
               "imageChange":{
                  "image":"fabric8Console",
                  "from":{
                     "name":"jimmidyson/k8s-proxy"
                  },
                  "tag":"latest"
               }
            }
         ]
      },
      {
         "apiVersion":"v1beta1",
         "kind":"ImageRepository",
         "metadata":{
            "labels":{
               "component":"fabric8Console"
            },
            "name":"console"
         }
      },
      {
         "apiVersion":"v1beta1",
         "containerPort":9090,
         "creationTimestamp":null,
         "id":"console-service",
         "kind":"Service",
         "port":80,
         "selector":{
            "component":"fabric8Console"
         }
      },
      {
         "apiVersion":"v1beta1",
         "kind":"DeploymentConfig",
         "metadata":{
            "name":"console-deploy-config"
         },
         "template":{
            "controllerTemplate":{
               "podTemplate":{
                  "desiredState":{
                     "manifest":{
                        "containers":[
                           {
                              "image":"console",
                              "name":"fabric8-console-container",
                              "env":[
                                 {
                                    "name":"DOCKER_REGISTRY",
                                    "value":"$REGISTRY_SERVICE_HOST:$REGISTRY_SERVICE_PORT"
                                 },
                                 {
                                    "name":"KUBERNETES_TRUST_CERT",
                                    "value":"true"
                                 },
                                 {
                                    "name":"PROXY_DISABLE_CERT_VALIDATION",
                                    "value":"true"
                                 }
                              ],
                              "ports":[
                                 {
                                    "containerPort":9090,
                                    "protocol":"TCP"
                                 }
                              ]
                           }
                        ],
                        "version":"test"
                     }
                  },
                  "labels":{
                     "component":"fabric8Console"
                  }
               },
               "replicaSelector":{
                  "component":"fabric8Console"
               },
               "replicas":1
            },
            "strategy":{
               "type":"Recreate"
            }
         },
         "triggers":[
            {
               "type":"ImageChange",
               "imageChangeParams":{
                  "automatic":true,
                  "containerNames":[
                     "fabric8-console-container"
                  ],
                  "from":{
                     "name":"console"
                  },
                  "tag":"latest"
               }
            }
         ]
      }
   ]
}
